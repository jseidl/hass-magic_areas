
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://magicareas.io/how-to/implementation-ideas/">
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../troubleshooting/">
      
      
      <link rel="icon" href="https://raw.githubusercontent.com/home-assistant/brands/master/custom_integrations/magic_areas/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Implementation Ideas - Magic Areas</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="yellow">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#implementation-ideas" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Magic Areas" class="md-header__button md-logo" aria-label="Magic Areas" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/home-assistant/brands/master/custom_integrations/magic_areas/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Magic Areas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Implementation Ideas
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="yellow"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/jseidl/magic-areas" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/" class="md-tabs__link">
          
  
  
    
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../installation/" class="md-tabs__link">
          
  
  
    
  
  How-To

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../features/" class="md-tabs__link">
          
  
  
    
  
  Features

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../community/" class="md-tabs__link">
        
  
  
    
  
  Community

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Magic Areas" class="md-nav__button md-logo" aria-label="Magic Areas" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/home-assistant/brands/master/custom_integrations/magic_areas/logo.png" alt="logo">

    </a>
    Magic Areas
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jseidl/magic-areas" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/presence-sensing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presence Sensing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/area-states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Area States
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/meta-areas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta-Areas
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    How-To
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-To
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Implementation Ideas
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Implementation Ideas
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      General considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mmwave-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      mmWave sensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mmwave-and-pir-sensor-positioning" class="md-nav__link">
    <span class="md-ellipsis">
      mmWave and PIR sensor positioning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mmWave and PIR sensor positioning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pir-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      PIR sensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mmwave-sensors_1" class="md-nav__link">
    <span class="md-ellipsis">
      mmWave sensors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensing-presence-on-dumb-devices" class="md-nav__link">
    <span class="md-ellipsis">
      Sensing presence on dumb devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wasp-in-a-box" class="md-nav__link">
    <span class="md-ellipsis">
      Wasp in a box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ble-trackers" class="md-nav__link">
    <span class="md-ellipsis">
      BLE Trackers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indoor-cameras-are-creepy-but-hear-me-out" class="md-nav__link">
    <span class="md-ellipsis">
      Indoor cameras are creepy, but hear me out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sleep-states" class="md-nav__link">
    <span class="md-ellipsis">
      Sleep States
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sleep States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automating-sleep-states" class="md-nav__link">
    <span class="md-ellipsis">
      Automating sleep states
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sleep-lights" class="md-nav__link">
    <span class="md-ellipsis">
      Sleep lights
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeouts-and-extended-state" class="md-nav__link">
    <span class="md-ellipsis">
      Timeouts and extended state
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exterior" class="md-nav__link">
    <span class="md-ellipsis">
      Exterior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exterior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#front-yard-porch" class="md-nav__link">
    <span class="md-ellipsis">
      Front Yard / Porch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backyard" class="md-nav__link">
    <span class="md-ellipsis">
      Backyard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interior" class="md-nav__link">
    <span class="md-ellipsis">
      Interior
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#entry-hall" class="md-nav__link">
    <span class="md-ellipsis">
      Entry hall
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#living-room-dining-room" class="md-nav__link">
    <span class="md-ellipsis">
      Living Room &amp; Dining Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hallways" class="md-nav__link">
    <span class="md-ellipsis">
      Hallways
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#family-room" class="md-nav__link">
    <span class="md-ellipsis">
      Family Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kitchen" class="md-nav__link">
    <span class="md-ellipsis">
      Kitchen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pantry-closets-and-maybe-attics-small-sheds" class="md-nav__link">
    <span class="md-ellipsis">
      Pantry &amp; Closets (and maybe Attics &amp; small sheds)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bathrooms" class="md-nav__link">
    <span class="md-ellipsis">
      Bathrooms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bedrooms" class="md-nav__link">
    <span class="md-ellipsis">
      Bedrooms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#home-offices" class="md-nav__link">
    <span class="md-ellipsis">
      (Home) Offices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#garage-and-bigger-sheds" class="md-nav__link">
    <span class="md-ellipsis">
      Garage (and bigger sheds)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basement" class="md-nav__link">
    <span class="md-ellipsis">
      Basement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gym" class="md-nav__link">
    <span class="md-ellipsis">
      Gym
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meta-areas" class="md-nav__link">
    <span class="md-ellipsis">
      Meta-Areas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Meta-Areas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exterior-meta-area" class="md-nav__link">
    <span class="md-ellipsis">
      Exterior meta-area
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#floor-meta-areas" class="md-nav__link">
    <span class="md-ellipsis">
      Floor meta-areas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../features/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Smart Groups
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Smart Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/light-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Light Groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/fan-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fan Groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/climate-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Climate Control
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Simple Groups
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Simple Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/cover-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cover Groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/media-player-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Media Player Groups
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sensors & Tracking
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Sensors & Tracking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/aggregation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aggregation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/health-sensor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Health Sensors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/ble-tracker-monitor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BLE Tracker Monitor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/wasp-in-a-box/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wasp in a Box
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/area-aware-media-player/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Area-Aware Media Player
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/presence-hold/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presence Hold
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/jseidl/magic-areas/blob/main/docs/source/how-to/implementation-ideas.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="implementation-ideas">Implementation Ideas</h1>
<p>This is the "meta" cookbook which condenses the multiple features and tricks of <a href="https://github.com/jseidl/hass-magic_areas">Magic Areas</a> to magically and accurately (YMMV) track presence in every room of your house!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Magic Areas strength is on stacking multiple somewhat-reliable sources of presence into a nice solid and reliable presence tracking system. You will likely need to use multiple sources of presence that will be good at one situation (static vs moving, for example) but bad at others until you cover all the situations. Magic Areas has features (such as "Keep-only sensors") that allow you to use even flappy or slow sensors.</p>
</div>
<h2 id="general-considerations">General considerations</h2>
<h3 id="mmwave-sensors">mmWave sensors</h3>
<p>mmWave sensors are the absolute GOAT of human sensing. Some can be finicky to set up but once up and running they're reliable. mmWave sensors are not very good for exterior areas as there are lots of moving things, winds and animals. "Keep-only" functionality on Magic Areas allows us to bypass false-positives with curtains moving and animals but still might not be ideal.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>I recommend putting mmWave sensors in the "keep-only sensors" list and having a PIR motion sensor in the area alongside to avoid false-triggers.</p>
</div>
<h3 id="mmwave-and-pir-sensor-positioning">mmWave and PIR sensor positioning</h3>
<p>Most presence sensors are able to sense the area in front of them, usually a cone shape with the tip being on the sensor, spreading out. This is called the sensor's field-of-view (FoV).</p>
<h4 id="pir-sensors">PIR sensors</h4>
<p>PIR sensors are reliable and fast but they only detect movement, not people standing still. PIR's use infrared light (heat) and detect a change in that source's position across its FoV. It can't tell where you moved, which direction you moved, just that you moved.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You should place them with their FoV towards the access of rooms, usually in the ceiling corner facing the area you walk through after you go through the door.</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Failure</p>
<p>Avoid placing looking directly at the door or it will trigger when you walk past the room.</p>
</div>
<h4 id="mmwave-sensors_1">mmWave sensors</h4>
<p>These can be pointed wide in a corner as their FoV is usually wide and deep. You will need to tweak its settings until you're covering the room and not the other adjacent rooms as well. Prefer pointing mmWave sensors towards exterior walls rather than interior walls, when possible.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As you can see, PIR and mmWave have different positioning requirements and while PIR+mmWave combo sensors might be good for themselves on reducing false positives, they lose where their positioning is the same for both sensors. Magic Areas has the "keep-only sensors" functionality that will take care of reducing false-positives for you.</p>
</div>
<h3 id="sensing-presence-on-dumb-devices">Sensing presence on dumb devices</h3>
<p>A quick and dirty way to detect a device being in use (and thus using this information to trigger presence) is to use a power-metering smart outlets. There are a plethora of those on the market for very little. Unless you need to actually control the outlet, you can find metering-only smart outlets (with no relay). These can be cheaper and you don't risk accidentally turning off the device.</p>
<p>Plug your device into the outlet, see how much it draws when in use, add a <a href="https://www.home-assistant.io/integrations/threshold/">Threshold sensor</a> and set its device class to <code>presence</code> and add this entity to the area in question. Magic Areas will automatically pick it up and start using it as a presence source.</p>
<p>This is particularly useful for detecting workstation use through monitor power consumption, gym equipment use (e.g. treadmills), appliance use in the kitchen, knowing if an IR-controlled (not smart) light is actually on etc. Make sure the smart outlet is rated for the device you're plugging in! If you're plugging in anything with a motor or a heating element on it, do not skip this step.</p>
<h3 id="wasp-in-a-box">Wasp in a box</h3>
<p>This is an interesting concept where when movement is detected on a room with closed doors, presence is inferred to be kept until a door is open. This is ideal for rooms where you usually close the door when you're in, like bathrooms (if you to pee with the doors open, then that isn't for you), bedrooms at bedtime, garages, laundry rooms etc. I will re-mention Wasp in a box on appropriate rooms below.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Wasp in a box track [[aggregates|Aggregation]] sensors and thus will consider ALL doors and motion sensors in an area.</p>
</div>
<h3 id="ble-trackers">BLE Trackers</h3>
<p>BLE trackers are excellent for keeping presence reliably but they have a slow initial detection and occasional "flapping" between areas. We recommend using BLE trackers as "keep only sensors".</p>
<p>This feature is designed to support most BLE tracker integrations such as <a href="https://github.com/agittins/bermuda">Bermuda</a>, <a href="https://espresense.com/">ESPresence</a>, <a href="https://www.room-assistant.io/">Room Assistant</a> etc. I personally use Bermuda, but you do you.</p>
<div class="admonition failure">
<p class="admonition-title">Failure</p>
<p>Tracking of BLE devices needs that you go "all in" and add BLE proxies/trackers to almost every room to avoid situations where you're in a room that doesn't have a tracker but it's next to a room that does have a tracker, thus marking you on the wrong room.</p>
</div>
<h3 id="indoor-cameras-are-creepy-but-hear-me-out">Indoor cameras are creepy, but hear me out</h3>
<p>If you can safely deploy cloudless/fully-local/isolated cameras, then I recommend using cameras on your interior common areas paired with <a href="https://frigate.video/">Frigate</a> for person detection as a presence source.</p>
<h3 id="sleep-states">Sleep States</h3>
<p>I use <a href="https://github.com/basnijholt/adaptive-lighting">Adaptive Lighting</a> in all my rooms as most of my lights are at least dimmable. Adaptive Lighting provide a <code>switch</code> called "Sleep Mode" which is used by that integration to control your lights brightness and color in a different way.</p>
<p>Magic Areas can use those switches as "Sleep State" sensors. You can use any binary-state entity (<code>input_boolean</code>, <code>switch</code>, <code>binary_sensor</code>, etc) but it's very convenient to just reuse Adaptive Lighting's "Sleep Mode" switch. I like to make a <code>group</code> of switches with all the "Sleep Mode" switches from the common areas (basically everything that is not a bedroom) in the <code>all</code> mode. That way I can control the sleep state of all those areas at once via automations.</p>
<h4 id="automating-sleep-states">Automating sleep states</h4>
<p>For common areas, I have a Template binary sensor called <code>night_mode</code> based off <code>sensor.time</code> that is <code>on</code> during the period of 00h00 until 08h00. I have an automation listening to changes in that binary sensor. You can totally just make the automation trigger on time directly but I use that sensor in other automations.</p>
<p>For each bedroom there's a different automation. My kid's room is triggered by her smart speaker playing after <code>sun.sun</code> is <code>below_horizon</code> (she sleeps with "sleep songs"). Master bedroom is triggered by the bed sensor detecting occupancy for over 10m and the TV is off. The guest bedroom is triggered by the <code>night_mode</code> sensor as well.</p>
<h4 id="sleep-lights">Sleep lights</h4>
<p>I highly recommend having in every room possible a light source that is faint (or can be made faint) and small. These are great for when you're walking around the house in pitch black and you surely don't want bright lights being turned on by Magic Areas. Most ceiling lights will be either too bright at the minimum level or not even turn on when you dim them too low. It's best to use smaller lamps or decorative lights that can be run ~20-25% and give a good faint glow that is enough to light your path without hurting your eyes or disturbing nearby areas (for example, in the US, usually internal doors are required to have a significant gap behind them and light will leak from these gaps into the room).</p>
<h3 id="timeouts-and-extended-state">Timeouts and extended state</h3>
<p>Magic Areas uses timeout settings to release the occupancy state of an area after not seeing any presence states for a while. These timeouts are configurable for regular occupancy, extended and sleep states. Extended state is gained after presence is held in an area after a configurable amount of time. This state can be used for light control but also overrides the regular timeout, allowing one to configure a longer timeout if an area has been occupied for this extended time.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Fine-tuning those timeouts are <strong>key</strong> for consistent presence tracking. Prefer slower (bigger) timeouts and only pull back after you have more presence sources. Reliable presence sources such as mmWave, BLE Trackers or Wasp in a box might allow you to live with shorter "clear timeouts".</p>
</div>
<h2 id="exterior">Exterior</h2>
<h3 id="front-yard-porch">Front Yard / Porch</h3>
<p>The first thing to do is add a contact sensor to your front door. You may add this sensor to either your entry hall or the front yard / porch area, then force-add (using "include entities" option) to the other area. Use outdoor-rated motion sensors plus person-detection with your cameras (e.g. Frigate) if you happen to have it.</p>
<p>Motion sensors / person detection will be your initial trigger with the door holding presence while your stationary talking to someone at your door or putting the groceries / packages / mail in.</p>
<p>As your front door is susceptible to a lot of noisy movement sources, it might false trigger a LOT. In order to mitigate that you can try the following:
* Remove motion as source of presence
* Use outdoor-rated motion sensors that can be tuned to ignore smaller targets (animals)
* Use person-detection from Frigate, delineate a perimeter and exclude the sidewalk. This way you only will have triggers when someone crosses into your property.</p>
<h3 id="backyard">Backyard</h3>
<p>Backyard will work similarly as the front yard but you can't rely on door sensors to keep presence up because one usually does not keep their backyard door open. You will need to rely either on person detection with cameras, add more motion sensors and play with "clear timeout" to be lax enough (~15m on extended mode should work).</p>
<p>On houses, you can split the backyard into three areas: one for the main backyard in the back of the house and one for each "side strips" (if you have it). This only makes sense if you have controllable lights on these "side strips". Then add the strips "area state tracker" sensor to the main backyard via "include entities".</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We're putting those side strips in the backyard because they're usually behind the fence. If yours are not like this, feel free to play around.</p>
</div>
<h2 id="interior">Interior</h2>
<h3 id="entry-hall">Entry hall</h3>
<p>One usually doesn't "hang out" in their entry hall unless they're talking to someone at the door. This make's the entry hall a similar candidate as the front yard / porch. Add the door (contact) sensor to keep presence and a motion sensor to trigger it initially. For the same reason, you can safely set a low "clear timeout" to maximize your energy savings (if using "light control").</p>
<h3 id="living-room-dining-room">Living Room &amp; Dining Room</h3>
<p>These areas have the challenge of constantly having "standing still" occupancy while users are sitting down on the couch or at the table eating. This is a classic mmWave + PIR motion sensor scenario as power outlets are usually widely available on these areas. Person detection with indoor cameras can help but placing the cameras free of obstructions can be challenging. These areas have no doors (usually) so wasp-in-a-box is out of question. BLE trackers are particularly useful here as well.</p>
<p>Since those are high traffic (passing by) areas usually, be sure to set the "extended time" somewhat long (~5m) and the "extended timeout" also long, so the area has a "slow release" avoiding false-clears.</p>
<h3 id="hallways">Hallways</h3>
<p>It depends on the kind of hallway. If your hallway is a passage only, meaning you'd rarely stand there for a while, then you might be able to get away with motion sensors and an appropriate "clear timeout". If you have closets, you may want to add contact sensors to the closet's doors.</p>
<h3 id="family-room">Family Room</h3>
<p>Family room follows the same concept of living &amp; dining room, except that you can use "watching the tv" as a presence source. This can be achieved the following ways:</p>
<ul>
<li>(if your TV is dumb -- not smart) Use a power-metering smart outlet, note the consumption with the TV off and with the TV on, add a Threshold sensor for when the TV is on, use that sensor as presence source on that area.</li>
<li>(if your TV is smart) Use the media player state</li>
</ul>
<p>BLE trackers are particularly useful here as well. Make sure to follow the "extended time" and "extended timeout" recommendations from Living Room &amp; Dining Room above.</p>
<h3 id="kitchen">Kitchen</h3>
<p>Apart from the regular motion / mmWave sensors, kitchen can have a few more source of presence:</p>
<ul>
<li>(with a smart fridge) Use the door sensors of that device</li>
<li>(with a dumb fridge) Add contact sensors to the doors</li>
<li>(if your sink has a pull-out shower head) Strap a vibration sensor to the shower head hose under the sink. That baby slaps when water runs through it.</li>
<li>(if you have a pantry) Use the pantry door sensor</li>
<li>Use vibration sensors under your countertop as presence sources to catch when you're cutting stuff or placing dishes / glasses down.</li>
<li>Use power-metering smart outlets with Threshold sensor to trigger presence when using appliances such as toaster, kettle etc.</li>
</ul>
<p>If you don't have an mmWave sensor in the kitchen, you will need to play with the "extended time" and "extended timeout" to ensure consistent tracking.</p>
<h3 id="pantry-closets-and-maybe-attics-small-sheds">Pantry &amp; Closets (and maybe Attics &amp; small sheds)</h3>
<p>These are areas where you don't usually close the door behind you, they have their doors closed when not in use and open while in use. A single door (contact) sensor should be enough to keep the area occupied while the door is open and clear when closed. This allows us to set "clear timeout" to 0 (zero) thus instantly releasing the occupancy state when the doors are closed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It really only makes sense to create these "sub areas" for closets and pantries if you have lights (or other supported devices) to control automatically, otherwise you can add their door contact sensors directly to the parent area.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to add the closet's area state tracker sensor to the area that holds the closet itself (e.g. bedroom, hallway) so their presence is kept while the closet is in use.</p>
</div>
<h3 id="bathrooms">Bathrooms</h3>
<p>I've tried almost everything here. Motion sensors alone won't cut it, as you might already have some experience with it. Tracking humidity for baths works initially but either fails to keep tracking or fails to stop tracking. mmWave sensors are the absolute best option here but my peeve is that bathrooms don't usually benefit from well placed outlets.</p>
<p>mmWave sensors will usually "steal" one of your precious limited outlets, even thou battery-operated "sleeper" mmWave sensors exists, wired ones are more common. If you have a smart speaker there and only a 1-gang outlet, you're out of outlets for hair dryers and so. Also, usually the outlet isn't where the mmWave sensor would be better placed so likely you'll have a cord going unsightly.</p>
<p>Wasp in a box are very good at this, have a contact sensor at the door, a battery powered motion sensor at a corner and you should be OK. (for the most part).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>mmWave are the best, if you can live with the issues described above, go for it. If not, wasp in a box is your friend!</p>
</div>
<div class="admonition failure">
<p class="admonition-title">Failure</p>
<p>Don't add door sensors as presence sensors as those areas usually have doors open while unnocupied.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>"Clear timeout" setting for bathrooms is an artform and you will have to fiddle with it a bit as it will depend on your presence sources and how well they work. If wasp in a box is working reliable for you, you may be able to set a low "clear timeout".</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have an exhaust fan in your bathroom, you may want to use a humidity sensor paired with the [[Fan Groups|Fan-Groups]] feature tracking <code>humidity</code> of the area. This will automatically control your bathroom exhaust as needed.</p>
</div>
<h3 id="bedrooms">Bedrooms</h3>
<p>Bedrooms also should have at least a PIR motion sensor and a mmWave sensor. BLE trackers are particularly useful here as well. You can get fancy and use "bed sensors", either off-the-shelf or DIY using load-cells/bathroom scales (just google it).</p>
<p>Wasp-in-a-box works well for bedrooms but only for bedtime when doors are actually closed (if you do close your doors on your bedrooms, of course). If you don't use wasp-in-a-box then setting a slow (~30m) "extended timeout" is recommended.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have a suite bedroom, make sure to use the attached bathroom's area state tracker sensor as a presence sensor on the bedroom. This will help keep the bedroom occupied while you go to the bedroom in the middle of the night, otherwise your bedroom could go "clear" and when you walk back, the lights would turn on on you.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have a TV on your bedroom, you can add it as a presence source the same way as in the Family Room.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have fans in your bedroom, you can use [[Fan Groups|Fan-Groups]] to control them based off the area's temperature (you will need a temperature sensor in the area, evidently).</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>On your own bedroom, you may get away from using an mmWave sensor if you have a BLE tracker and usually have your phone or smartwatch on you all the time.</p>
</div>
<h3 id="home-offices">(Home) Offices</h3>
<p>Areas that have computers on while in use can use this information for presence tracking. It's recommended that your computer is configure to auto-sleep after being idle for a while, in order to release presence. You can get this information from
* Ping sensor
* Integration with networking software (e.g. Unifi)
* Using a power-metering smart outlet to measure the consumption of your monitors. If you have more than one, use a T-splitter and connect all of them to the same metering outlet.</p>
<p>If you mostly use this are for using the computer, that alone + PIR motion sensor should do the trick. If you perform actions where you're sitting still but not on your computer (e.g. reading), you will need an mmWave sensor or a contact sensor with Wasp-in-abox (although you need to remember to close the door every time before reading). In this case you can set a pretty low "clear timeout".</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Using a vibration sensor on your chair can also work as source of presence, considering you have the habit of moving back and forth with the backrest or swinging your legs often.</p>
</div>
<h3 id="garage-and-bigger-sheds">Garage (and bigger sheds)</h3>
<p>Garages are usually cluttered spaces which hinders the ability of motion sensors (PIR) of working at their best by having a lot of blind spots. This can be countered by adding more motion sensors but this will result in more batteries for you to change. My garage has 3 accesses, the main garage door, a side door to the outside and a door to the inside of the house. I have contact sensors on all of those accesses and I use the <code>door</code> sensors as presence sensing. I have a camera doing person detection via Frigate, a single motion sensor up in a corner opposite to the camera and the Wasp-in-a-box feature turned on.</p>
<h3 id="basement">Basement</h3>
<p>Basements follow the same challenges as garages but it's not unusual to have the main access door open while you're down there so Wasp-in-a-box would not consistently help here. If you do usually close the door behind you (or it has auto-close), then Wasp-in-a-box will be useful. mmWave with a couple PIR motion sensors would be the best.</p>
<h3 id="gym">Gym</h3>
<p>If you use powered machines like treadmills, bikes, plug them into power-metering smart outlets and use a Threshold sensor to detect them being used. mmWave, Wasp-in-a-box and BLE trackers can also be used here. If you usually exercise with a smart speaker in the room, you can use this media player device as presence tracking as well.</p>
<h2 id="meta-areas">Meta-Areas</h2>
<p>Meta-Areas are areas that are not Home Assistant areas but rather represent logical groups of areas. In Magic Areas, you can specify whether the area is an interior or exterior area. This allows 3 meta-areas to be created: One for all interior areas, one for all exterior areas and a "Global" meta-area for all areas.</p>
<p>This allows you to have things like:
* Average temperature of your home's interior. (and all other aggregates)
* Average illuminance of the exterior (to use as an "Area light sensor").
* Control all lights in a floor at the same time.</p>
<p>There are additional features that are exclusive to meta-areas such as the [[Area-aware media player|Area-aware-media-player]] and features that are not exclusive to meta-areas but makes more sense in meta-areas such as [[Climate control|Climate-control]].</p>
<h3 id="exterior-meta-area">Exterior meta-area</h3>
<p>I do recommend having illuminance sensors across your exterior areas for more accurate exterior luminance aggregation on the exterior meta-area.</p>
<h3 id="floor-meta-areas">Floor meta-areas</h3>
<p>I love those areas to tie my thermostat to the aggregate state of floors. Since I have a dual zone HVAC that exposes two climate entities to home assistant, I add [[Climate control|Climate-control]] to each floor pointing to each climate device. If you have a single zone HVAC in a two story house, you can use the Interior meta-area instead.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 16, 2025 05:46:16 UTC">September 16, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 16, 2025 05:46:16 UTC">September 16, 2025</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../getting-started/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Getting Started">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Getting Started
              </div>
            </div>
          </a>
        
        
          
          <a href="../troubleshooting/" class="md-footer__link md-footer__link--next" aria-label="Next: Troubleshooting">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Troubleshooting
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.indexes", "toc.integrate", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.action.edit"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>